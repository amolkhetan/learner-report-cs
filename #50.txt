Started by user Amol
[Pipeline] Start of Pipeline
[Pipeline] node
Running on Jenkins in /var/lib/jenkins/workspace/learnerreportcs-amol
[Pipeline] {
[Pipeline] withEnv
[Pipeline] {
[Pipeline] stage
[Pipeline] { (Clone App Repository)
[Pipeline] git
The recommended git tool is: NONE
No credentials specified
 > /usr/bin/git rev-parse --resolve-git-dir /var/lib/jenkins/workspace/learnerreportcs-amol/.git # timeout=10
Fetching changes from the remote Git repository
 > /usr/bin/git config remote.origin.url https://github.com/amolkhetan/learner-report-cs/ # timeout=10
Fetching upstream changes from https://github.com/amolkhetan/learner-report-cs/
 > /usr/bin/git --version # timeout=10
 > git --version # 'git version 2.43.0'
 > /usr/bin/git fetch --tags --force --progress -- https://github.com/amolkhetan/learner-report-cs/ +refs/heads/*:refs/remotes/origin/* # timeout=10
 > /usr/bin/git rev-parse refs/remotes/origin/main^{commit} # timeout=10
Checking out Revision 21c28fdd533b4164c0b9416e5b1cdbd9f25b1386 (refs/remotes/origin/main)
 > /usr/bin/git config core.sparsecheckout # timeout=10
 > /usr/bin/git checkout -f 21c28fdd533b4164c0b9416e5b1cdbd9f25b1386 # timeout=10
 > /usr/bin/git branch -a -v --no-abbrev # timeout=10
 > /usr/bin/git branch -D main # timeout=10
 > /usr/bin/git checkout -b main 21c28fdd533b4164c0b9416e5b1cdbd9f25b1386 # timeout=10
Commit message: "added charts"
 > /usr/bin/git rev-list --no-walk 21c28fdd533b4164c0b9416e5b1cdbd9f25b1386 # timeout=10
[Pipeline] }
[Pipeline] // stage
[Pipeline] stage
[Pipeline] { (Build & Push Docker Images)
[Pipeline] script
[Pipeline] {
[Pipeline] withCredentials
Masking supported pattern matches of $DOCKERHUB_PASS
[Pipeline] {
[Pipeline] dir
Running in /var/lib/jenkins/workspace/learnerreportcs-amol/learnerReportCS_backend
[Pipeline] {
[Pipeline] sh
Warning: A secret was passed to "sh" using Groovy String interpolation, which is insecure.
		 Affected argument(s) used the following variable(s): [DOCKERHUB_PASS]
		 See https://jenkins.io/redirect/groovy-string-interpolation for details.
+ echo ðŸ”§ Building image for amolkhetan/learnerreportcs_learnerreportcs_backend
ðŸ”§ Building image for amolkhetan/learnerreportcs_learnerreportcs_backend
+ DOCKER_BUILDKIT=0 docker build --no-cache -t amolkhetan/learnerreportcs_learnerreportcs_backend:latest .
DEPRECATED: The legacy builder is deprecated and will be removed in a future release.
            BuildKit is currently disabled; enable it by removing the DOCKER_BUILDKIT=0
            environment-variable.

Sending build context to Docker daemon  231.4kB
Step 1/7 : FROM node:16
 ---> 1ddc7e4055fd
Step 2/7 : WORKDIR /usr/src/app
 ---> Running in 9e552e84db06
 ---> Removed intermediate container 9e552e84db06
 ---> 8f2adefa8380
Step 3/7 : COPY package*.json ./
 ---> e4451a9393fd
Step 4/7 : RUN npm install
 ---> Running in ffb5bfbd8162
[91mnpm[0m[91m WARN deprecated crypto@1.0.1: This package is no longer supported. It's now a built-in Node module. If you've depended on crypto, you should switch to the one that's built-in.
[0m
added 210 packages, and audited 211 packages in 11s

15 packages are looking for funding
  run `npm fund` for details

22 vulnerabilities (5 low, 6 moderate, 10 high, 1 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues (including breaking changes), run:
  npm audit fix --force

Run `npm audit` for details.
[91mnpm notice 
npm notice New major version of npm available! 8.19.4 -> 11.5.2
npm notice Changelog: <https://github.com/npm/cli/releases/tag/v11.5.2>
npm notice Run `npm install -g npm@11.5.2` to update!
npm notice[0m[91m 
[0m ---> Removed intermediate container ffb5bfbd8162
 ---> c9c7abfd3e56
Step 5/7 : COPY . .
 ---> 37b3c0a2a629
Step 6/7 : EXPOSE 3001
 ---> Running in 9b1fbc06060a
 ---> Removed intermediate container 9b1fbc06060a
 ---> edb29dc60b41
Step 7/7 : CMD [ "node", "index.js" ]
 ---> Running in b646c75204f0
 ---> Removed intermediate container b646c75204f0
 ---> b519e6f30567
Successfully built b519e6f30567
Successfully tagged amolkhetan/learnerreportcs_learnerreportcs_backend:latest
+ echo ****
+ docker login -u amolkhetan --password-stdin
WARNING! Your password will be stored unencrypted in /var/lib/jenkins/.docker/config.json.
Configure a credential helper to remove this warning. See
https://docs.docker.com/engine/reference/commandline/login/#credential-stores

Login Succeeded
+ docker push amolkhetan/learnerreportcs_learnerreportcs_backend:latest
The push refers to repository [docker.io/amolkhetan/learnerreportcs_learnerreportcs_backend]
284803ab804b: Preparing
aecf00590409: Preparing
61218dec1188: Preparing
c7efcf8f1d0d: Preparing
be322b479aee: Preparing
d41bcd3a037b: Preparing
fe0d845e767b: Preparing
f25ec1d93a58: Preparing
794ce8b1b516: Preparing
3220beed9b06: Preparing
684f82921421: Preparing
9af5f53e8f62: Preparing
794ce8b1b516: Waiting
3220beed9b06: Waiting
684f82921421: Waiting
9af5f53e8f62: Waiting
d41bcd3a037b: Waiting
fe0d845e767b: Waiting
f25ec1d93a58: Waiting
be322b479aee: Layer already exists
d41bcd3a037b: Layer already exists
fe0d845e767b: Layer already exists
c7efcf8f1d0d: Pushed
f25ec1d93a58: Layer already exists
61218dec1188: Pushed
284803ab804b: Pushed
3220beed9b06: Layer already exists
794ce8b1b516: Layer already exists
684f82921421: Layer already exists
9af5f53e8f62: Layer already exists
aecf00590409: Pushed
latest: digest: sha256:bc60cc744deb2f3e819ee54eee3cd0dd01c0d81b45b484c1748b9ca6610ba900 size: 2841
[Pipeline] }
[Pipeline] // dir
[Pipeline] dir
Running in /var/lib/jenkins/workspace/learnerreportcs-amol/learnerReportCS_frontend
[Pipeline] {
[Pipeline] sh
Warning: A secret was passed to "sh" using Groovy String interpolation, which is insecure.
		 Affected argument(s) used the following variable(s): [DOCKERHUB_PASS]
		 See https://jenkins.io/redirect/groovy-string-interpolation for details.
+ echo ðŸ”§ Building image for amolkhetan/learnerreportcs_learnerreportcs_frontend
ðŸ”§ Building image for amolkhetan/learnerreportcs_learnerreportcs_frontend
+ DOCKER_BUILDKIT=0 docker build --no-cache -t amolkhetan/learnerreportcs_learnerreportcs_frontend:latest .
DEPRECATED: The legacy builder is deprecated and will be removed in a future release.
            BuildKit is currently disabled; enable it by removing the DOCKER_BUILDKIT=0
            environment-variable.

Sending build context to Docker daemon  1.565MB
Step 1/7 : FROM node:20
 ---> d05db19b2fc9
Step 2/7 : WORKDIR /app
 ---> Running in 083a339bd56c
 ---> Removed intermediate container 083a339bd56c
 ---> cdd09e61e530
Step 3/7 : COPY package*.json ./
 ---> 79565fc377ae
Step 4/7 : RUN npm install --legacy-peer-deps
 ---> Running in 61616b90200d
[91mnpm warn deprecated w3c-hr-time@1.0.2: Use your platform's native performance.now() and performance.timeOrigin.
[0m[91mnpm warn deprecated stable@0.1.8: Modern JS already guarantees Array#sort() is a stable sort, so this library is deprecated. See the compatibility table on MDN: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/sort#browser_compatibility
[0m[91mnpm warn deprecated sourcemap-codec@1.4.8: Please use @jridgewell/sourcemap-codec instead
[0m[91mnpm warn deprecated rollup-plugin-terser@7.0.2: This package has been deprecated and is no longer maintained. Please use @rollup/plugin-terser
[0m[91mnpm warn deprecated rimraf@3.0.2: Rimraf versions prior to v4 are no longer supported
[0m[91mnpm warn deprecated q@1.5.1: You or someone you depend on is using Q, the JavaScript Promise library that gave JavaScript developers strong feelings about promises. They can almost certainly migrate to the native JavaScript promise now. Thank you literally everyone for joining me in this bet against the odds. Be excellent to each other.
npm warn deprecated
npm warn deprecated (For a CapTP with native promises, see @endo/eventual-send and @endo/captp)
[0m[91mnpm warn deprecated workbox-google-analytics@6.5.4: It is not compatible with newer versions of GA starting with v4, as long as you are using GAv3 it should be ok, but the package is not longer being maintained
[0m[91mnpm warn deprecated inflight@1.0.6: This module is not supported, and leaks memory. Do not use it. Check out lru-cache if you want a good and tested way to coalesce async requests by a key value, which is much more comprehensive and powerful.
[0m[91mnpm warn deprecated glob@7.2.3: Glob versions prior to v9 are no longer supported
[0m[91mnpm warn deprecated domexception@2.0.1: Use your platform's native DOMException instead
[0m[91mnpm warn deprecated acorn-import-assertions@1.8.0: package has been renamed to acorn-import-attributes
[0m[91mnpm warn deprecated abab@2.0.6: Use your platform's native atob() and btoa() methods instead
[0m[91mnpm warn deprecated svgo@1.3.2: This SVGO version is no longer supported. Upgrade to v2.x.x.
[0m[91mnpm warn deprecated @xmldom/xmldom@0.8.6: this version has critical issues, please update to the latest version
[0m[91mnpm warn deprecated @sinonjs/commons@1.8.4: Breaks compatibility with ES5, use v1.8.5
[0m[91mnpm warn deprecated @humanwhocodes/object-schema@1.2.1: Use @eslint/object-schema instead
[0m[91mnpm warn deprecated @humanwhocodes/config-array@0.11.7: Use @eslint/config-array instead
[0m[91mnpm warn deprecated @material-ui/styles@4.11.5: Material UI v4 doesn't receive active development since September 2021. See the guide https://mui.com/material-ui/migration/migration-v4/ to upgrade to v5.
[0m[91mnpm warn deprecated eslint@8.26.0: This version is no longer supported. Please see https://eslint.org/version-support for other options.
[0m[91mnpm warn deprecated @babel/plugin-proposal-unicode-property-regex@7.18.6: This proposal has been merged to the ECMAScript standard and thus this plugin is no longer maintained. Please use @babel/plugin-transform-unicode-property-regex instead.
[0m[91mnpm warn deprecated @babel/plugin-proposal-private-property-in-object@7.18.6: This proposal has been merged to the ECMAScript standard and thus this plugin is no longer maintained. Please use @babel/plugin-transform-private-property-in-object instead.
[0m[91mnpm warn deprecated @babel/plugin-proposal-optional-chaining@7.18.9: This proposal has been merged to the ECMAScript standard and thus this plugin is no longer maintained. Please use @babel/plugin-transform-optional-chaining instead.
[0m[91mnpm warn deprecated @babel/plugin-proposal-private-methods@7.18.6: This proposal has been merged to the ECMAScript standard and thus this plugin is no longer maintained. Please use @babel/plugin-transform-private-methods instead.
[0m[91mnpm warn deprecated @babel/plugin-proposal-optional-catch-binding@7.18.6: This proposal has been merged to the ECMAScript standard and thus this plugin is no longer maintained. Please use @babel/plugin-transform-optional-catch-binding instead.
[0m[91mnpm warn deprecated @babel/plugin-proposal-logical-assignment-operators@7.18.9: This proposal has been merged to the ECMAScript standard and thus this plugin is no longer maintained. Please use @babel/plugin-transform-logical-assignment-operators instead.
[0m[91mnpm warn deprecated @babel/plugin-proposal-numeric-separator@7.18.6: This proposal has been merged to the ECMAScript standard and thus this plugin is no longer maintained. Please use @babel/plugin-transform-numeric-separator instead.
[0m[91mnpm warn deprecated @babel/plugin-proposal-nullish-coalescing-operator@7.18.6: This proposal has been merged to the ECMAScript standard and thus this plugin is no longer maintained. Please use @babel/plugin-transform-nullish-coalescing-operator instead.
[0m[91mnpm warn deprecated @babel/plugin-proposal-json-strings@7.18.6: This proposal has been merged to the ECMAScript standard and thus this plugin is no longer maintained. Please use @babel/plugin-transform-json-strings instead.
[0m[91mnpm warn deprecated @babel/plugin-proposal-export-namespace-from@7.18.9: This proposal has been merged to the ECMAScript standard and thus this plugin is no longer maintained. Please use @babel/plugin-transform-export-namespace-from instead.
[0m[91mnpm warn deprecated @babel/plugin-proposal-dynamic-import@7.18.6: This proposal has been merged to the ECMAScript standard and thus this plugin is no longer maintained. Please use @babel/plugin-transform-dynamic-import instead.
[0m[91mnpm warn deprecated @babel/plugin-proposal-class-static-block@7.18.6: This proposal has been merged to the ECMAScript standard and thus this plugin is no longer maintained. Please use @babel/plugin-transform-class-static-block instead.
[0m[91mnpm warn deprecated @babel/plugin-proposal-class-properties@7.18.6: This proposal has been merged to the ECMAScript standard and thus this plugin is no longer maintained. Please use @babel/plugin-transform-class-properties instead.
[0m[91mnpm warn deprecated @babel/plugin-proposal-object-rest-spread@7.19.4: This proposal has been merged to the ECMAScript standard and thus this plugin is no longer maintained. Please use @babel/plugin-transform-object-rest-spread instead.
[0m[91mnpm warn deprecated @babel/plugin-proposal-async-generator-functions@7.20.1: This proposal has been merged to the ECMAScript standard and thus this plugin is no longer maintained. Please use @babel/plugin-transform-async-generator-functions instead.
[0m[91mnpm warn deprecated @material-ui/core@4.12.4: Material UI v4 doesn't receive active development since September 2021. See the guide https://mui.com/material-ui/migration/migration-v4/ to upgrade to v5.
[0m
added 1783 packages, and audited 1784 packages in 42s

253 packages are looking for funding
  run `npm fund` for details

48 vulnerabilities (11 low, 15 moderate, 19 high, 3 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues (including breaking changes), run:
  npm audit fix --force

Run `npm audit` for details.
[91mnpm notice
npm notice New major version of npm available! 10.8.2 -> 11.5.2
npm notice Changelog: https://github.com/npm/cli/releases/tag/v11.5.2
npm notice To update run: npm install -g npm@11.5.2
npm notice
[0m ---> Removed intermediate container 61616b90200d
 ---> f8e07e8becf2
Step 5/7 : COPY . .
 ---> fa46f47c3c9b
Step 6/7 : EXPOSE 3000
 ---> Running in a3379e48d1e3
 ---> Removed intermediate container a3379e48d1e3
 ---> 9986628649d6
Step 7/7 : CMD ["npm", "start"]
 ---> Running in 5a34e0ecb3c2
 ---> Removed intermediate container 5a34e0ecb3c2
 ---> e14ec5dc6d7b
Successfully built e14ec5dc6d7b
Successfully tagged amolkhetan/learnerreportcs_learnerreportcs_frontend:latest
+ echo ****
+ docker login -u amolkhetan --password-stdin
WARNING! Your password will be stored unencrypted in /var/lib/jenkins/.docker/config.json.
Configure a credential helper to remove this warning. See
https://docs.docker.com/engine/reference/commandline/login/#credential-stores

Login Succeeded
+ docker push amolkhetan/learnerreportcs_learnerreportcs_frontend:latest
The push refers to repository [docker.io/amolkhetan/learnerreportcs_learnerreportcs_frontend]
bf6dbe02dfa5: Preparing
139bbaa176e3: Preparing
9a95b1ebdb04: Preparing
851d79521e5a: Preparing
96767085272b: Preparing
bd3c4925e69b: Preparing
4a77b9269e6d: Preparing
7127e8a082e9: Preparing
1b90aaaeb596: Preparing
a9b908787288: Preparing
20c8aca21338: Preparing
175a19836175: Preparing
4a77b9269e6d: Waiting
7127e8a082e9: Waiting
1b90aaaeb596: Waiting
a9b908787288: Waiting
20c8aca21338: Waiting
175a19836175: Waiting
bd3c4925e69b: Waiting
96767085272b: Layer already exists
bd3c4925e69b: Layer already exists
4a77b9269e6d: Layer already exists
7127e8a082e9: Layer already exists
851d79521e5a: Pushed
9a95b1ebdb04: Pushed
1b90aaaeb596: Layer already exists
a9b908787288: Layer already exists
bf6dbe02dfa5: Pushed
20c8aca21338: Layer already exists
175a19836175: Layer already exists
139bbaa176e3: Pushed
latest: digest: sha256:31149517c5900a68fd7e004594ec3fd96db56b056c191857114fb877446202f0 size: 2843
[Pipeline] }
[Pipeline] // dir
[Pipeline] }
[Pipeline] // withCredentials
[Pipeline] }
[Pipeline] // script
[Pipeline] }
[Pipeline] // stage
[Pipeline] stage
[Pipeline] { (Configure KubeContext)
[Pipeline] withCredentials
Masking supported pattern matches of $AWS_ACCESS_KEY_ID or $AWS_SECRET_ACCESS_KEY
[Pipeline] {
[Pipeline] sh
+ echo ðŸ”‘ Configuring AWS and Kube context
ðŸ”‘ Configuring AWS and Kube context
+ aws sts get-caller-identity
{
    "UserId": "AIDA6GBMCU7ZOZTUDYICM",
    "Account": "975050024946",
    "Arn": "arn:aws:iam::975050024946:user/amol.khetan@gmail.com"
}
+ aws eks --region us-west-2 update-kubeconfig --name learnerreport
Added new context arn:aws:eks:us-west-2:975050024946:cluster/learnerreport to /var/lib/jenkins/.kube/config
+ kubectl config current-context
arn:aws:eks:us-west-2:975050024946:cluster/learnerreport
[Pipeline] }
[Pipeline] // withCredentials
[Pipeline] }
[Pipeline] // stage
[Pipeline] stage
[Pipeline] { (Deploy with Helm)
[Pipeline] sh
+ echo ðŸš€ Deploying MERN stack using Helm
ðŸš€ Deploying MERN stack using Helm
+ helm lint helmchart/learner-reportcs-charts
==> Linting helmchart/learner-reportcs-charts
[INFO] Chart.yaml: icon is recommended

1 chart(s) linted, 0 chart(s) failed
+ helm upgrade --install learner-report helmchart/learner-reportcs-charts --namespace learner-report --create-namespace --set frontend.tag=latest --set backend.tag=latest
Release "learner-report" does not exist. Installing it now.
NAME: learner-report
LAST DEPLOYED: Sun Aug 10 08:01:28 2025
NAMESPACE: learner-report
STATUS: deployed
REVISION: 1
TEST SUITE: None
+ kubectl get pods -n learner-report
NAME                                  READY   STATUS              RESTARTS   AGE
backendlrcs-5ffb89677-x9wgx           0/1     ContainerCreating   0          2s
frontendlrcs-69bd455c6-rzcd2          0/1     ContainerCreating   0          2s
mongodb-deployment-6d7d4dd458-qv2lc   0/1     Pending             0          2s
[Pipeline] }
[Pipeline] // stage
[Pipeline] stage
[Pipeline] { (Declarative: Post Actions)
[Pipeline] echo
âœ… MERN app deployed successfully to EKS!
[Pipeline] }
[Pipeline] // stage
[Pipeline] }
[Pipeline] // withEnv
[Pipeline] }
[Pipeline] // node
[Pipeline] End of Pipeline
Finished: SUCCESS
